<!--
  ~ Copyright 2018 BSC Msc, LLC
  ~
  ~ This file is part of the AuTe Framework project
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<pre style="word-wrap: normal; word-break: normal; white-space: pre-wrap;">
Инструкция по интерфейсу Автотестера:
  <h4>1. Список проектов</h4>
    Настройки проекта
      Шаги "перед" и "после" сценариев.
        В случаях, когда перед и после сценариев необходимо всегда выполнять одни и те же шаги, например, авторизация и логаут,
        их можно вынести в отдельные сценарии, затем в настройках проекта указать их для выполнения перед и после каждого сценария.
      Использование http-заголовока testId
        Сервис заглушек должен иметь возможность отличать запросы, направляемые в рамках разных шагов, для их проверки и отправки заданных в шаге ответов.
        Для этого к каждому запросу от Автотестера к тестируемому порталу добавляется http-заголовок со случайно генерируемым уникальным ID.
        Портал должен пересылать указанный ID в сервис заглушек.
        Название http-заголовка указывается в поле "TestId header name".
      Стенд
        На вкладке "Стенд" отображаются параметры стенда, заданные в env.yml.
        Редактирование на форме недоступно. Изменить параметры можно только непосредственно в файле env.yml.
      Группы
        На вкладке "Группы" доступно переименование и создание новых групп.
  <h4>2. Список сценариев в проекте</h4>
    Настройки сценария:
      В настройках сценария можно изменить его заголовок.
      В случае, если необходимо отключить выполнение сценариев "перед" и "после", указанные в настройках проекта, необходимо отметить соответствующие чекбоксы.
    Группы
      Группы сценариев соответствуют директориям, вложенным в /&lt;project_dir>/scenarios/
      Поддерживается один уровень вложенности.
    Создание сценария
      Для создания нового сценария необходимо указать его название и нажать кнопку "Создать". Сценарий будет создан в текущей выбранной группе.
    Выполнение сценариев:
      Для выполнения сценария необходимо нажать "Выполнить".
      После выполнения можно просмотреть результат. В результатах отображаются статусы выполнения каждого шага с возможность просмотра тела запроса, фактического и ожидаемого результатов с выделением различающихся строк и детали с описанием возникшей ошибки.
  <h4>3. Список шагов в сценарии</h4>
    Один шаг сценария содержит следующий набор возможностей:
    <h5>3.1 URL, http-headers</h5>
      В поле адреса указывается относительный адрес возможность подстановки в него сохраненных значений, пример: /rest/items/&#123;itemId	&#125;
    <h5>3.2 Запрос, ответ и режим сравнения</h5>
      Доступны два типа тела запроса:
      - raw
        Отправляется текстовое тело запроса
      - form-data
        Отправляется форма с текстовыми полями или с файлами. В случае отправки файла указывается путь к нему относительно директории с проектом.
        Пример: файл расположен в директории /projects/&lt; project_dir >/files/img/photo.jpg, в форме необходимо указать: files/img/photo.jpg

      Режим сравнения ответа с ожидаемым результатом:
      - JSON (по умолчанию)
        Сравнение двух JSON-объектов. Для гибкой настройки используются различные режимы:
        - NON_EXTENSIBLE (По умолчанию. Не расширяемый, нестрогий порядок элементов в массивах)
        - STRICT (Не расширяемый, строгий порядок элементов в массивах)
        - LENIENT (Расширяемый, нестрогий порядок элементов в массивах)
        - STRICT_ORDER (Расширяемый, строгий порядок элементов в массивах)
      - Full match
        Полное соответствие ответа ожидаемому результату
      - Mask *ignore*
        Сравнение как строк с возможностью игнорирования части строки.
        Игнорируемая часть строки указывается ключевым словом *ignore*.
        Пример:
          Ожидаемый результат: &lt;xml>&lt;datetime>*ignore*&lt;/datetime>&lt;name>Item name&lt;/name>&lt;/xml>
          Фактический результат: &lt;xml>&lt;datetime>2018-01-22 17:50:24&lt;/datetime>&lt;name>Item name&lt;/name>&lt;/xml>
    <h5>3.3 Сохраняемые значения</h5>
      После получения ответа поля из JSON можно сохранить для использования в последующих шагах, а также проверить их значение.
      Обращение к полям происходит с помощью JSON XPath. Пример:
      parameterName = $.element.items[2].title
    <h5>3.4 SQL</h5>
      Отправка SQL-запроса к базе данных, полученные поля соответственно записываются в сохраняемые значения.
      В текст SQL-запроса можно вставлять сохраненные значения.
      Пример:
        Сохраняемые значения: tradeId, tradeSum
        Запрос SQL: SELECT ID, CNT * PRICE FROM TRADES WHERE USER_ID = %userId% ORDER BY ID DESC
      Полученные поля будут записаны в соответствующие сохраняемые значения.
      Работает, если в env.yml указаны настройки подключения к базе данных тестируемого портала. Параметр "dataBase".
      Запросы, изменяющие записи в базе данных, запрещены.
    <h5>3.5 Моки</h5>
      - Проверка запросов, отправляемых поратлом в заглушки.
      - Указание ответов, которые заглушка возвращает на запросы портала.
      Работает, если:
      - В настройках проекта включен параметр "Использовать случайный testId" и указано название http-заголовка;
      - Тестируемый портал "пробрасывает" http-заголовок в заглушки.
    <h5>3.6 Очереди сообщений</h5>
      Отправляется сообщение в очередь с указанными названиям и телом сообщения.
      Работает, если в env.yml указаны настройки подключения к серверу: параметр "amqpBroker".
    <h5>3.7 Поллинг</h5>
      Выполнение запроса многократно до тех пор, пока указанный JSON-параметр не будет найден.
      Запросы повторяются с периодом: 1 секунда, максимум: 50 раз.
      Для указания искомого параметра используется JSON XPath. Пример: $.body.items
    <h5>3.8 Тест-кейсы</h5>
      Позволяет выполнять шаг многократно с различнымы наборами сохраненных значений. В колонках указываются названия переменных, в строках - значения.
</pre>
